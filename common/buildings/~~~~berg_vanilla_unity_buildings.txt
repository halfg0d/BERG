##################
# Unity buildings
##################

# Regular empire
building_autochthon_monument = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	category = unity

	potential = {
		berg_st_can_build_autochton_monument = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	inline_script = {
		script = building_resources/vanilla/monument_regular
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 1
	}
	triggered_desc = {
		text = building_autochthon_monument_effect
	}
	prerequisites = {
		"tech_cultural_heritage"
	}

	upgrades = {
		building_heritage_site
	}

	convert_to = {
		building_corporate_monument
		building_simulation_1
		building_galactic_memorial_1
		building_sensorium_1
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = autochton_monument
		TRIGGER = " "
	}
}

building_heritage_site = {
	base_buildtime = @b2_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_autochton_monument = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_site
		building_simulation_2
		building_galactic_memorial_2
		building_sensorium_2
	}
	inline_script = {
		script = building_resources/vanilla/monument_regular
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 2
	}
	triggered_desc = {
		text = building_heritage_site_effect
	}
	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}

	upgrades = {
		building_hypercomms_forum
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = heritage_site
		TRIGGER = " "
	}
}

building_hypercomms_forum = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_autochton_monument = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_forum
		building_simulation_3
		building_galactic_memorial_3
		building_sensorium_3
	}
	inline_script = {
		script = building_resources/vanilla/monument_regular
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 3
	}
	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	prerequisites = {
		"tech_hypercomms_forum"
	}
	upgrades = {
		"building_avb_monument_4" #AVB
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = hypercomms_forum
		TRIGGER = " "
	}
}
building_avb_monument_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_autochton_monument = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	inline_script = {
		script = building_resources/vanilla/monument_regular
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 4
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_4
		TRIGGER = " "
	}
}
building_avb_monument_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_autochton_monument = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}
	inline_script = {
		script = building_resources/vanilla/monument_regular
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 5
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_5
		TRIGGER = " "
	}
}
building_avb_monument_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_autochton_monument = yes
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_gestalt = yes
					is_megacorp = yes
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}
	inline_script = {
		script = building_resources/vanilla/monument_regular
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 6
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_gestalt = no
		is_megacorp = no
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_6
		TRIGGER = " "
	}
}

##################
# Bureaucrats
##################

building_bureaucratic_1 = {
	base_buildtime = @b1_time

	exempt_from_ai_planet_specialization = no

	category = unity

	potential = {
		berg_st_can_build_bureaucratic = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_temple
		building_hive_node
		building_uplink_node
	}

	inline_script = {
		script = vanilla/unity/berg_bureaucracy_script
		tier = 1
	}
	inline_script = {
		script = building_resources/vanilla/bureaucratic
		tier = 1
	}
	upgrades = {
		"building_bureaucratic_2"
	}

	prerequisites = {
		"tech_planetary_government"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = bureaucratic_1
		TRIGGER = " "
	}
}

building_bureaucratic_2 = {
	base_buildtime = @b2_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_bureaucratic = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_holotemple
		building_hive_cluster
		building_network_junction
	}

	inline_script = {
		script = vanilla/unity/berg_bureaucracy_script
		tier = 2
	}
	inline_script = {
		script = building_resources/vanilla/bureaucratic
		tier = 2
	}

	upgrades = {
		"building_bureaucratic_3"
	}

	prerequisites = {
		"tech_colonial_bureaucracy"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = bureaucratic_2
		TRIGGER = " "
	}
}

building_bureaucratic_3 = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_bureaucratic = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_regular_empire = no
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_sacred_nexus
		building_hive_confluence
		building_system_conflux
	}

	inline_script = {
		script = vanilla/unity/berg_bureaucracy_script
		tier = 3
	}
	inline_script = {
		script = building_resources/vanilla/bureaucratic
		tier = 3
	}
	inline_script = vanilla/unity/berg_priest_federation_script

	prerequisites = {
		"tech_galactic_bureaucracy"
	}
	upgrades = {
		"building_avb_bureaucratic_4" #AVB
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = bureaucratic_3
		TRIGGER = " "
	}
}
building_avb_bureaucratic_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_bureaucratic = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = yes
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_hive_unity_4
		building_avb_machine_unity_4
		building_avb_temple_4
		building_avb_death_temple_4
	}

	inline_script = {
		script = vanilla/unity/berg_bureaucracy_script
		tier = 4
	}
	inline_script = {
		script = building_resources/vanilla/bureaucratic
		tier = 4
	}
	prerequisites = {
		"tech_avb_bureaucratic_4"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		building_avb_bureaucratic_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_bureaucratic_4
		TRIGGER = " "
	}
}

building_avb_bureaucratic_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_bureaucratic = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = yes
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_5
		building_avb_hive_unity_5
		building_avb_machine_unity_5
		building_avb_death_temple_5
	}
	inline_script = {
		script = vanilla/unity/berg_bureaucracy_script
		tier = 5
	}
	inline_script = {
		script = building_resources/vanilla/bureaucratic
		tier = 5
	}
	prerequisites = {
		"tech_avb_bureaucratic_5"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	upgrades = {
		building_avb_bureaucratic_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_bureaucratic_5
		TRIGGER = " "
	}
}

building_avb_bureaucratic_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_bureaucratic = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_gestalt = yes
				is_spiritualist = yes
				has_make_spiritualist_perk = yes
			}
		}
	}

	convert_to = {
		building_avb_temple_6
		building_avb_hive_unity_6
		building_avb_machine_unity_6
		building_avb_death_temple_6
	}

	inline_script = {
		script = vanilla/unity/berg_bureaucracy_script
		tier = 6
	}
	inline_script = {
		script = building_resources/vanilla/bureaucratic
		tier = 6
	}
	prerequisites = {
		"tech_avb_bureaucratic_6"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_bureaucratic_6
		TRIGGER = " "
	}
}

##################
# Spiritualists
##################
building_temple = {
	base_buildtime = @b1_time

	exempt_from_ai_planet_specialization = no

	category = unity
	
	potential = {
		berg_st_can_build_temple = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						AND = {
							is_spiritualist = no
							has_make_spiritualist_perk = no
						}
						OR = {
							berg_has_ecc_mod = no
							AND = {
								berg_has_ecc_mod = yes
								is_death_cult_empire = yes
							}
						}
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_1
		building_hive_node
		building_uplink_node
	}
	
	inline_script = {
		script = building_resources/vanilla/temple
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_temple_script
		tier = 1
	}
	upgrades = {
		building_holotemple
	}

	prerequisites = {
		"tech_cultural_heritage"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = temple
		TRIGGER = " "
	}
}

building_holotemple = {
	base_buildtime = @b2_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_temple = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						AND = {
							is_spiritualist = no
							has_make_spiritualist_perk = no
						}
						OR = {
							berg_has_ecc_mod = no
							AND = {
								berg_has_ecc_mod = yes
								is_death_cult_empire = yes
							}
						}
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_2
		building_hive_cluster
		building_network_junction
	}

	inline_script = {
		script = building_resources/vanilla/temple
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_temple_script
		tier = 2
	}

	upgrades = {
		building_sacred_nexus
	}

	prerequisites = {
		"tech_holographic_rituals"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = holotemple
		TRIGGER = " "
	}
}

building_sacred_nexus = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_temple = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						AND = {
							is_spiritualist = no
							has_make_spiritualist_perk = no
						}
						OR = {
							berg_has_ecc_mod = no
							AND = {
								berg_has_ecc_mod = yes
								is_death_cult_empire = yes
							}
						}
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_hive_confluence
		building_system_conflux
	}

	inline_script = {
		script = building_resources/vanilla/temple
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_temple_script
		tier = 3
	}
	inline_script = {
		script = ECC/berg_ecc_sacred_nexus_script
		tier = 3
	}
	inline_script = vanilla/unity/berg_priest_federation_script

	prerequisites = {
		"tech_consecration_fields"
	}
	upgrades = {
		"building_avb_temple_4" #AVB
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sacred_nexus
		TRIGGER = " "
	}
}
building_avb_temple_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_temple = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						AND = {
							is_spiritualist = no
							has_make_spiritualist_perk = no
						}
						OR = {
							berg_has_ecc_mod = no
							AND = {
								berg_has_ecc_mod = yes
								is_death_cult_empire = yes
							}
						}
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_4
		building_avb_hive_unity_4
		building_avb_machine_unity_4
		building_avb_death_temple_4
	}

	inline_script = {
		script = building_resources/vanilla/temple
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_temple_script
		tier = 4
	}
	prerequisites = {
		"tech_avb_temple_4"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_5"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_temple_4
		TRIGGER = " "
	}
}
building_avb_temple_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_temple = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						AND = {
							is_spiritualist = no
							has_make_spiritualist_perk = no
						}
						OR = {
							berg_has_ecc_mod = no
							AND = {
								berg_has_ecc_mod = yes
								is_death_cult_empire = yes
							}
						}
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_5
		building_avb_hive_unity_5
		building_avb_machine_unity_5
		building_avb_death_temple_5
	}

	inline_script = {
		script = building_resources/vanilla/temple
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_temple_script
		tier = 5
	}
	prerequisites = {
		"tech_avb_temple_5"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	upgrades = {
		"building_avb_temple_6"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_temple_5
		TRIGGER = " "
	}
}
building_avb_temple_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_temple = yes
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						AND = {
							is_spiritualist = no
							has_make_spiritualist_perk = no
						}
						OR = {
							berg_has_ecc_mod = no
							AND = {
								berg_has_ecc_mod = yes
								is_death_cult_empire = yes
							}
						}
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_bureaucratic_6
		building_avb_hive_unity_6
		building_avb_machine_unity_6
		building_avb_death_temple_6
	}

	inline_script = {
		script = building_resources/vanilla/temple
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_temple_script
		tier = 6
	}
	prerequisites = {
		"tech_avb_temple_6"
	}

	show_tech_unlock_if = {
		OR = {
			is_spiritualist = yes
			AND = {
				is_gestalt = no
				has_make_spiritualist_perk = yes
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_temple_6
		TRIGGER = " "
	}
}

##################
# Machine
##################

building_uplink_node = {
	base_buildtime = @b1_time
	icon = building_autochthon_monument

	exempt_from_ai_planet_specialization = no

	category = unity

	potential = {
		berg_st_can_build_uplink_node = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				berg_is_servitor_empire = yes
			}
		}
	}

	convert_to = {
		building_bureaucratic_1
		building_temple
		building_hive_node
	}

	inline_script = {
		script = building_resources/vanilla/uplink_node
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_uplink_node_script
		tier = 1
	}
	upgrades = {
		"building_network_junction"
	}

	prerequisites = {
		"tech_planetary_government"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			berg_is_servitor_empire = yes
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = uplink_node
		TRIGGER = " "
	}
}

building_network_junction = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_heritage_site

	category = unity

	potential = {
		berg_st_can_build_uplink_node = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				berg_is_servitor_empire = yes
			}
		}
	}

	convert_to = {
		building_bureaucratic_2
		building_holotemple
		building_hive_cluster
	}

	inline_script = {
		script = building_resources/vanilla/uplink_node
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_uplink_node_script
		tier = 2
	}
	upgrades = {
		"building_system_conflux"
	}

	prerequisites = {
		"tech_colonial_bureaucracy"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			berg_is_servitor_empire = yes
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = network_junction
		TRIGGER = " "
	}
}

building_system_conflux = {
	base_buildtime = @b3_time
	can_build = no
	icon = building_hypercomms_forum

	category = unity

	potential = {
		berg_st_can_build_uplink_node = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				berg_is_servitor_empire = yes
			}
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_sacred_nexus
		building_hive_confluence
	}

	inline_script = {
		script = building_resources/vanilla/uplink_node
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_uplink_node_script
		tier = 3
	}

	prerequisites = {
		"tech_galactic_bureaucracy"
	}
	upgrades = {
		"building_avb_machine_unity_4" #AVB
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			berg_is_servitor_empire = yes
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = system_conflux
		TRIGGER = " "
	}
}
building_avb_machine_unity_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_monument_4

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_uplink_node = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_temple_4
		building_avb_hive_unity_4
		building_avb_bureaucratic_4
		building_avb_death_temple_4
	}
	inline_script = {
		script = building_resources/vanilla/uplink_node
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_uplink_node_script
		tier = 4
	}
	prerequisites = {
		"tech_avb_bureaucratic_4"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_machine_unity_4
		TRIGGER = " "
	}
}
building_avb_machine_unity_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_monument_5

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_uplink_node = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_temple_5
		building_avb_hive_unity_5
		building_avb_bureaucratic_5
		building_avb_death_temple_5
	}

	inline_script = {
		script = building_resources/vanilla/uplink_node
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_uplink_node_script
		tier = 5
	}

	prerequisites = {
		"tech_avb_bureaucratic_5"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	upgrades = {
		building_avb_machine_unity_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_machine_unity_5
		TRIGGER = " "
	}
}
building_avb_machine_unity_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_monument_6

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_uplink_node = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}

	convert_to = {
		building_avb_temple_6
		building_avb_hive_unity_6
		building_avb_bureaucratic_6
		building_avb_death_temple_6
	}

	inline_script = {
		script = building_resources/vanilla/uplink_node
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_uplink_node_script
		tier = 6
	}
	prerequisites = {
		"tech_avb_bureaucratic_6"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		NOT = {
			has_valid_civic = civic_machine_servitor
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_machine_unity_6
		TRIGGER = " "
	}
}

##################
# Hive Minds
##################
building_hive_node = {
	base_buildtime = @b1_time

	exempt_from_ai_planet_specialization = no

	category = unity

	potential = {
		berg_st_can_build_hive_node = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_bureaucratic_1
		building_temple
		building_uplink_node
	}
	inline_script = {
		script = building_resources/vanilla/hive_node
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_synaptic_node_script
		tier = 1
	}
	prerequisites = {
		"tech_hive_node"
	}

	upgrades = {
		building_hive_cluster
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = hive_node
		TRIGGER = " "
	}
}

building_hive_cluster = {
	base_buildtime = @b2_time
	can_build = no

	exempt_from_ai_planet_specialization = no

	category = unity

	potential = {
		berg_st_can_build_hive_node = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_bureaucratic_2
		building_holotemple
		building_network_junction
	}

	inline_script = {
		script = building_resources/vanilla/hive_node
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_synaptic_node_script
		tier = 2
	}

	prerequisites = {
		"tech_hive_cluster"
	}

	upgrades = {
		building_hive_confluence
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = hive_cluster
		TRIGGER = " "
	}
}

building_hive_confluence = {
	base_buildtime = @b3_time
	can_build = no

	category = unity

	potential = {
		berg_st_can_build_hive_node = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_bureaucratic_3
		building_sacred_nexus
		building_system_conflux
	}

	
	inline_script = {
		script = building_resources/vanilla/hive_node
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_synaptic_node_script
		tier = 3
	}
	prerequisites = {
		"tech_hive_confluence"
	}
	upgrades = {
		"building_avb_hive_unity_4" #AVB
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = hive_confluence
		TRIGGER = " "
	}
}
building_avb_hive_unity_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_hive_node = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_avb_temple_4
		building_avb_machine_unity_4
		building_avb_bureaucratic_4
		building_avb_death_temple_4
	}

	inline_script = {
		script = building_resources/vanilla/hive_node
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_synaptic_node_script
		tier = 4
	}
	prerequisites = {
		tech_avb_hive_unity_4
	}
	upgrades = {
		"building_avb_hive_unity_5"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_hive_unity_4
		TRIGGER = " "
	}
}
building_avb_hive_unity_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_hive_node = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_avb_temple_5
		building_avb_machine_unity_5
		building_avb_bureaucratic_5
		building_avb_death_temple_5
	}
	inline_script = {
		script = building_resources/vanilla/hive_node
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_synaptic_node_script
		tier = 5
	}
	prerequisites = {
		tech_avb_hive_unity_5
	}
	upgrades = {
		"building_avb_hive_unity_6"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_hive_unity_5
		TRIGGER = " "
	}
}
building_avb_hive_unity_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_hive_node = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_hive_empire = no }
	}

	convert_to = {
		building_avb_temple_6
		building_avb_machine_unity_6
		building_avb_bureaucratic_6
		building_avb_death_temple_6
	}

	inline_script = {
		script = building_resources/vanilla/hive_node
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_synaptic_node_script
		tier = 6
	}
	prerequisites = {
		tech_avb_hive_unity_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_hive_unity_6
		TRIGGER = " "
	}
}

##################
# Death Cult
##################

# Sacrificial Temple (basic)
building_sacrificial_temple_1 = {
	base_buildtime = @b1_time
	position_priority = 100

	category = unity

	potential = {
		berg_st_can_build_death_temple = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				is_death_cult_empire = no
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_1
		building_temple
		building_hive_node
		building_uplink_node
	}

	inline_script = {
		script = building_resources/vanilla/death_temple
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_sacrificial_temple_script
		tier = 1
	}
	prerequisites = {
		"tech_cultural_heritage"
	}

	upgrades = {
		building_sacrificial_temple_2
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sacrificial_temple_1
		TRIGGER = " "
	}
}

# Grim Holotemple
building_sacrificial_temple_2 = {
	base_buildtime = @b2_time
	can_build = no
	position_priority = 100

	category = unity

	potential = {
		berg_st_can_build_death_temple = yes
	}

	allow = {
		exists = owner
		has_upgraded_capital = yes
		owner = {
			is_death_cult_empire = yes
		}
		NOT = { has_modifier = slave_colony }
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_2
		building_holotemple
		building_hive_cluster
		building_network_junction
	}

	inline_script = {
		script = building_resources/vanilla/death_temple
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_sacrificial_temple_script
		tier = 2
	}
	prerequisites = {
		"tech_holographic_rituals"
	}

	upgrades = {
		building_sacrificial_temple_3
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sacrificial_temple_2
		TRIGGER = " "
	}
}

# Temple of Grand Sacrifice
building_sacrificial_temple_3 = {
	base_buildtime = @b3_time
	can_build = no
	position_priority = 100

	category = unity

	potential = {
		berg_st_can_build_death_temple = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_bureaucratic_3
		building_sacred_nexus
		building_system_conflux
		building_hive_confluence
	}

	inline_script = {
		script = building_resources/vanilla/death_temple
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_sacrificial_temple_script
		tier = 3
	}
	inline_script = vanilla/unity/berg_priest_federation_script
	prerequisites = {
		"tech_consecration_fields"
	}
	upgrades = {
		"building_avb_death_temple_4" #AVB
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sacrificial_temple_3
		TRIGGER = " "
	}
}
building_avb_death_temple_4 = {
	base_buildtime = @avb_u4_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_death_temple = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_hive_unity_4
		building_avb_machine_unity_4
		building_avb_bureaucratic_4
		building_avb_temple_4
	}
	inline_script = {
		script = building_resources/vanilla/death_temple
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_sacrificial_temple_script
		tier = 4
	}

	prerequisites = {
		"tech_avb_temple_4"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		building_avb_death_temple_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_death_temple_4
		TRIGGER = " "
	}
}
building_avb_death_temple_5 = {
	base_buildtime = @avb_u5_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_death_temple = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_hive_unity_5
		building_avb_machine_unity_5
		building_avb_bureaucratic_5
		building_avb_temple_5
	}
	inline_script = {
		script = building_resources/vanilla/death_temple
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_sacrificial_temple_script
		tier = 5
	}
	prerequisites = {
		"tech_avb_temple_5"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	upgrades = {
		building_avb_death_temple_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_death_temple_5
		TRIGGER = " "
	}
}
building_avb_death_temple_6 = {
	base_buildtime = @avb_u6_time
	can_build = no

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_death_temple = yes
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { is_death_cult_empire = no }
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_hive_unity_6
		building_avb_machine_unity_6
		building_avb_bureaucratic_6
		building_avb_temple_6
	}
	inline_script = {
		script = building_resources/vanilla/death_temple
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_sacrificial_temple_script
		tier = 6
	}
	prerequisites = {
		"tech_avb_temple_6"
	}

	show_tech_unlock_if = {
		is_death_cult_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_death_temple_6
		TRIGGER = " "
	}
}

##################
# Memorialists
##################

#Sanctuary of Repose
building_galactic_memorial_1 = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	category = unity

	potential = {
		berg_st_can_build_galactic_memorial = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				is_memorialist_empire = no
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_simulation_1
		building_sensorium_1
	}
	prerequisites = {
		"tech_cultural_heritage"
	}
	inline_script = {
		script = building_resources/vanilla/memorial_regular
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_script
		tier = 1
	}
	triggered_desc = {
		text = building_autochthon_monument_effect
	}
	upgrades = {
		building_galactic_memorial_2
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = galactic_memorial_1
		TRIGGER = " "
	}
}

#Pillar of Quietus
building_galactic_memorial_2 = {
	base_buildtime = @b2_time
	can_build = no
	category = unity

	potential = {
		berg_st_can_build_galactic_memorial = yes
	}

	allow = {
		exists = owner
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				is_memorialist_empire = no
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_corporate_site
		building_simulation_2
		building_sensorium_2
	}

	inline_script = {
		script = building_resources/vanilla/memorial_regular
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_script
		tier = 2
	}
	triggered_desc = {
		text = building_heritage_site_effect
	}

	prerequisites = {
		"tech_heritage_site"
	}

	upgrades = {
		building_galactic_memorial_3
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	 }
	 inline_script = {
		 script = berg_desc/berg_building_desc
		 BUILDING = galactic_memorial_2
		 TRIGGER = " "
	 }
}

#Galactic Memorial
building_galactic_memorial_3 = {
	base_buildtime = @b3_time
	can_build = no
	category = unity

	potential = {
		berg_st_can_build_galactic_memorial = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_corporate_forum
		building_simulation_3
		building_sensorium_3
	}

	inline_script = {
		script = building_resources/vanilla/memorial_regular
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_script
		tier = 3
	}
	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	prerequisites = {
		"tech_hypercomms_forum"
	}
	upgrades = {
		"building_avb_monument_memorial_4" #AVB
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = galactic_memorial_3
		TRIGGER = " "
	}
}
building_avb_monument_memorial_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_galactic_memorial = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_4
	}
	inline_script = {
		script = building_resources/vanilla/memorial_regular
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_script
		tier = 4
	}
	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	upgrades = {
		building_avb_monument_memorial_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_memorial_4
		TRIGGER = " "
	}
}
building_avb_monument_memorial_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_galactic_memorial = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_5
	}

	inline_script = {
		script = building_resources/vanilla/memorial_regular
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_script
		tier = 5
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}

	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	upgrades = {
		building_avb_monument_memorial_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_memorial_5
		TRIGGER = " "
	}
}
building_avb_monument_memorial_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_galactic_memorial = yes
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_memorialist_empire = no }
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_6
	}
	inline_script = {
		script = building_resources/vanilla/memorial_regular
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_script
		tier = 6
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_memorialist_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_memorial_6
		TRIGGER = " "
	}
}


##########################
# Machine Empire Memorial
##########################
building_simulation_1 = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	icon = building_holo_theatres

	category = unity

	potential = {
		berg_st_can_build_simulation = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	inline_script = {
		script = building_resources/vanilla/monument_machine
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 1
		type = monument_machine
	}
	triggered_desc = {
		text = building_autochthon_monument_effect
	}
	prerequisites = {
		"tech_cultural_heritage"
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_galactic_memorial_1
		building_sensorium_1
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}

	upgrades = {
		building_simulation_2
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = simulation_1
		TRIGGER = " "
	}
}

building_simulation_2 = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_hyper_entertainment_forum

	category = unity

	potential = {
		berg_st_can_build_simulation = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_site
		building_heritage_site
		building_galactic_memorial_2
		building_sensorium_2
	}
	inline_script = {
		script = building_resources/vanilla/monument_machine
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 2
		type = monument_machine
	}

	triggered_desc = {
		text = building_heritage_site_effect
	}

	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}

	upgrades = {
		building_simulation_3
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = simulation_2
		TRIGGER = " "
	}
}

building_simulation_3 = {
	base_buildtime = @b3_time
	can_build = no
	icon = building_citadel_of_faith

	category = unity

	potential = {
		berg_st_can_build_simulation = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_forum
		building_hypercomms_forum
		building_galactic_memorial_3
		building_sensorium_3
	}

	inline_script = {
		script = building_resources/vanilla/monument_machine
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 3
		type = monument_machine
	}
	triggered_desc = {
		text = building_hypercomms_forum_effect
	}


	prerequisites = {
		"tech_hypercomms_forum"
	}
	upgrades = {
		"building_avb_monument_machine_4" #AVB
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = simulation_3
		TRIGGER = " "
	}
}
building_avb_monument_machine_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_holo_theatre_4

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_simulation = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_hive_4
		building_avb_monument_4
		building_avb_monument_memorial_4
	}

	inline_script = {
		script = building_resources/vanilla/monument_machine
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 4
		type = monument_machine
	}
	triggered_desc = {
		text = building_avb_monument_effect_4
	}
	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_machine_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_machine_4
		TRIGGER = " "
	}
}
building_avb_monument_machine_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_holo_theatre_5

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_simulation = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_hive_5
		building_avb_monument_5
		building_avb_monument_memorial_5
	}

	inline_script = {
		script = building_resources/vanilla/monument_machine
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 5
		type = monument_machine
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_machine_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_machine_5
		TRIGGER = " "
	}
}
building_avb_monument_machine_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_holo_theatre_6

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_simulation = yes
	}

	allow = {
		has_upgraded_capital_5 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_hive_6
		building_avb_monument_6
		building_avb_monument_memorial_6
	}

	inline_script = {
		script = building_resources/vanilla/monument_machine
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 6
		type = monument_machine
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}
	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_machine_6
		TRIGGER = " "
	}
}

####################
# Megacorp Memorial
####################
building_corporate_monument = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	icon = building_autochthon_monument

	category = unity

	potential = {
		berg_st_can_build_corporate_monument = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_autochthon_monument
		building_simulation_1
		building_galactic_memorial_1
		building_sensorium_1
	}

	inline_script = {
		script = building_resources/vanilla/monument_megacorp
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 1
	}
	triggered_desc = {
		text = building_autochthon_monument_effect
	}
	prerequisites = {
		"tech_cultural_heritage"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		is_memorialist_empire = no
	}

	upgrades = {
		building_corporate_site
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = corporate_monument
		TRIGGER = " "
	}
}

building_corporate_site = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_heritage_site

	category = unity

	potential = {
		berg_st_can_build_corporate_monument = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_heritage_site
		building_galactic_memorial_2
		building_simulation_2
		building_sensorium_2
	}

	inline_script = {
		script = building_resources/vanilla/monument_megacorp
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 2
	}
	triggered_desc = {
		text = building_heritage_site_effect
	}

	prerequisites = {
		"tech_heritage_site"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}

	upgrades = {
		building_corporate_forum
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = corporate_site
		TRIGGER = " "
	}
}

building_corporate_forum = {
	base_buildtime = @b3_time
	can_build = no
	icon = building_hypercomms_forum

	category = unity

	potential = {
		berg_st_can_build_corporate_monument = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_hypercomms_forum
		building_simulation_3
		building_galactic_memorial_3
		building_sensorium_3
	}

	inline_script = {
		script = building_resources/vanilla/monument_megacorp
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 3
	}

	triggered_desc = {
		text = building_hypercomms_forum_effect
	}

	prerequisites = {
		"tech_hypercomms_forum"
	}
	upgrades = {
		"building_avb_monument_corp_4" #AVB
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = corporate_forum
		TRIGGER = " "
	}
}
building_avb_monument_corp_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_monument_4

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_corporate_monument = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_4
		building_avb_monument_hive_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}
	inline_script = {
		script = building_resources/vanilla/monument_megacorp
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 4
	}

	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	prerequisites = {
		"tech_avb_monument_4"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		"building_avb_monument_corp_5"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_corp_4
		TRIGGER = " "
	}
}
building_avb_monument_corp_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_monument_5

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_corporate_monument = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_5
		building_avb_monument_hive_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	inline_script = {
		script = building_resources/vanilla/monument_megacorp
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 5
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	prerequisites = {
		"tech_avb_monument_5"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	upgrades = {
		"building_avb_monument_corp_6"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_corp_5
		TRIGGER = " "
	}
}
building_avb_monument_corp_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_monument_6

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_corporate_monument = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_6
		building_avb_monument_hive_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	inline_script = {
		script = building_resources/vanilla/monument_megacorp
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_regular_monument_script
		tier = 6
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	prerequisites = {
		"tech_avb_monument_6"
	}

	show_tech_unlock_if = {
		is_megacorp = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_corp_6
		TRIGGER = " "
	}
}

#######################
# Hive Empire Memorial
#######################
building_sensorium_1 = {
	base_buildtime = @b1_time
	base_cap_amount = 1
	icon = building_holo_theatres

	category = unity

	potential = {
		berg_st_can_build_sensorium = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	inline_script = {
		script = building_resources/vanilla/monument_hive
		tier = 1
	}

	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 1
		type = monument_hive
	}
	triggered_desc = {
		text = building_autochthon_monument_effect
	}

	prerequisites = {
		"tech_hive_node"
	}

	convert_to = {
		building_autochthon_monument
		building_corporate_monument
		building_galactic_memorial_1
		building_simulation_1
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}

	upgrades = {
		building_sensorium_2
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sensorium_1
		TRIGGER = " "
	}
}

building_sensorium_2 = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_hyper_entertainment_forum

	category = unity

	potential = {
		berg_st_can_build_sensorium = yes
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_site
		building_heritage_site
		building_galactic_memorial_2
		building_simulation_2
	}

	inline_script = {
		script = building_resources/vanilla/monument_hive
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 2
		type = monument_hive
	}
	triggered_desc = {
		text = building_heritage_site_effect
	}

	prerequisites = {
		"tech_hive_cluster"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}

	upgrades = {
		building_sensorium_3
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sensorium_2
		TRIGGER = " "
	}
}

building_sensorium_3 = {
	base_buildtime = @b3_time
	can_build = no
	icon = building_citadel_of_faith

	category = unity

	potential = {
		berg_st_can_build_sensorium = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_corporate_forum
		building_hypercomms_forum
		building_galactic_memorial_3
		building_simulation_3
	}

	inline_script = {
		script = building_resources/vanilla/monument_hive
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 3
		type = monument_hive
	}
	triggered_desc = {
		text = building_hypercomms_forum_effect
	}


	prerequisites = {
		"tech_hive_confluence"
	}
	upgrades = {
		"building_avb_monument_hive_4" #AVB
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = sensorium_3
		TRIGGER = " "
	}
}
building_avb_monument_hive_4 = {
	base_buildtime = @avb_u4_time
	can_build = no
	icon = building_avb_holo_theatre_4

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_sensorium = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_4
		building_avb_monument_4
		building_avb_monument_machine_4
		building_avb_monument_memorial_4
	}

	inline_script = {
		script = building_resources/vanilla/monument_hive
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 4
		type = monument_hive
	}
	triggered_desc = {
		text = building_avb_monument_effect_4
	}

	prerequisites = {
		"tech_avb_hive_unity_4"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_hive_5
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_hive_4
		TRIGGER = " "
	}
}
building_avb_monument_hive_5 = {
	base_buildtime = @avb_u5_time
	can_build = no
	icon = building_avb_holo_theatre_5

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_sensorium = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_5
		building_avb_monument_5
		building_avb_monument_machine_5
		building_avb_monument_memorial_5
	}

	inline_script = {
		script = building_resources/vanilla/monument_hive
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 5
		type = monument_hive
	}
	triggered_desc = {
		text = building_avb_monument_effect_5
	}
	prerequisites = {
		"tech_avb_hive_unity_5"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
	upgrades = {
		building_avb_monument_hive_6
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_hive_5
		TRIGGER = " "
	}
}
building_avb_monument_hive_6 = {
	base_buildtime = @avb_u6_time
	can_build = no
	icon = building_avb_holo_theatre_6

	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_sensorium = yes
	}

	allow = {
		has_fully_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_hive_empire = no
					is_memorialist_empire = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_monument_corp_6
		building_avb_monument_6
		building_avb_monument_machine_6
		building_avb_monument_memorial_6
	}

	inline_script = {
		script = building_resources/vanilla/monument_hive
		tier = 6
	}
	inline_script = {
		script = vanilla/unity/berg_memorialist_gestalt_script
		tier = 6
		type = monument_hive
	}
	triggered_desc = {
		text = building_avb_monument_effect_6
	}

	prerequisites = {
		"tech_avb_hive_unity_6"
	}

	show_tech_unlock_if = {
		is_hive_empire = yes
		is_memorialist_empire = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_monument_hive_6
		TRIGGER = " "
	}
}

##################
# Unity boosters
##################
building_autocurating_vault = {
	base_buildtime = @b2_time
	
	empire_limit = {
		base = 1
	}

	category = unity

	potential = {
		berg_st_can_build_autocurating_vault = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = yes
					is_spiritualist = yes
					is_megacorp = yes
				}
			}
		}
	}

	convert_to = {
		building_citadel_of_faith
		building_alpha_hub
		building_corporate_vault
	}

	inline_script = {
		script = building_resources/vanilla/vault
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_vault_script
		tier = 1
	}

	prerequisites = {
		"tech_autocurating_vault"
	}
	upgrades = {
		"building_avb_autocurating_vault_2" #AVB
	}

	show_tech_unlock_if = {
		is_machine_empire = no
		is_spiritualist = no
		is_megacorp = no
		OR = {
			is_hive_empire = yes
			has_make_spiritualist_perk = no
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = autocurating_vault
		TRIGGER = " "
	}
}
building_avb_autocurating_vault_2 = {
	base_buildtime = @b4_time

	icon = building_avb_unity_booster_5
	category = unity
	can_build = no

	potential = {
		avb_hg_changes = yes
		berg_has_avb_mod = yes
		berg_st_can_build_autocurating_vault = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_machine_empire = yes
					is_spiritualist = yes
					is_megacorp = yes
				}
			}
		}
	}
	inline_script = {
		script = building_resources/vanilla/vault
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_vault_script
		tier = 2
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}
	show_tech_unlock_if = {
		is_machine_empire = no
		is_spiritualist = no
		is_megacorp = no
		OR = {
			is_hive_empire = yes
			has_make_spiritualist_perk = no
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_autocurating_vault_2
		TRIGGER = " "
	}
}

building_citadel_of_faith = {
	base_buildtime = @b2_time
	
	empire_limit = {
		base = 1
	}

	category = unity

	potential = {
		berg_st_can_build_citadel_faith = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_autocurating_vault
		building_alpha_hub
		building_corporate_vault
	}

	inline_script = {
		script = building_resources/vanilla/citadel_faith
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_citadel_faith_script
		tier = 1
	}
	prerequisites = {
		"tech_transcendent_faith"
	}
	upgrades = {
		"building_avb_citadel_of_faith_2" #AVB
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = citadel_of_faith
		TRIGGER = " "
	}
}
building_avb_citadel_of_faith_2 = {
	base_buildtime = @b2_time

	category = unity
	can_build = no

	potential = {
		avb_hg_changes = yes
		berg_has_avb_mod = yes
		berg_st_can_build_citadel_faith = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					AND = {
						is_spiritualist = no
						has_make_spiritualist_perk = no
					}
					is_gestalt = yes
				}
			}
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
		building_avb_corporate_vault_2
	}

	inline_script = {
		script = building_resources/vanilla/citadel_faith
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_citadel_faith_script
		tier = 2
	}
	prerequisites = {
		"tech_avb_transcendent_faith_2"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_citadel_of_faith_2
		TRIGGER = " "
	}

}

building_corporate_vault = {
	base_buildtime = @b3_time
	
	empire_limit = {
		base = 1
	}
	icon = building_autocurating_vault

	category = unity

	potential = {
		berg_st_can_build_corporate_vault = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
	}

	convert_to = {
		building_citadel_of_faith
		building_autocurating_vault
		building_alpha_hub
	}

	inline_script = {
		script = building_resources/vanilla/vault
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_vault_script
		tier = 1
	}

	prerequisites = {
		"tech_autocurating_vault"
	}
	upgrades = {
		"building_avb_corporate_vault_2" #AVB
	}

	show_tech_unlock_if = {
		is_megacorp = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = corporate_vault
		TRIGGER = " "
	}
}
building_avb_corporate_vault_2 = {
	base_buildtime = @b3_time

	icon = building_avb_unity_booster_5
	can_build = no

	category = unity

	potential = {
		avb_hg_changes = yes
		berg_has_avb_mod = yes
		berg_st_can_build_corporate_vault = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = {
				OR = {
					is_megacorp = no
					is_spiritualist = yes
					has_make_spiritualist_perk = yes
				}
			}
		}
	}

	convert_to = {
		building_avb_citadel_of_faith_2
		building_avb_autocurating_vault_2
		building_avb_alpha_hub_2
	}

	inline_script = {
		script = building_resources/vanilla/vault
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_vault_script
		tier = 2
	}
	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_spiritualist = no
		has_make_spiritualist_perk = no
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_corporate_vault_2
		TRIGGER = " "
	}
}

building_alpha_hub = {
	base_buildtime = @b3_time
	
	empire_limit = {
		base = 1
	}
	icon = building_autocurating_vault

	category = unity

	potential = {
		berg_st_can_build_alpha_hub = yes
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}

	convert_to = {
		building_autocurating_vault
		building_citadel_of_faith
		building_corporate_vault
	}
	inline_script = {
		script = building_resources/vanilla/alpha_hub
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_alpha_hub_script
		tier = 1
	}
	prerequisites = {
		"tech_autocurating_vault"
	}
	upgrades = {
		"building_avb_alpha_hub_2" #AVB
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = alpha_hub
		TRIGGER = " "
	}
}
building_avb_alpha_hub_2 = {
	base_buildtime = @b3_time
	icon = building_avb_unity_booster_5
	category = unity
	can_build = no

	potential = {
		avb_hg_changes = yes
		berg_has_avb_mod = yes
		berg_st_can_build_alpha_hub = yes
	}

	allow = {
		has_upgraded_capital_4 = yes
	}
	destroy_trigger = {
		exists = owner
		owner = { is_machine_empire = no }
	}

	convert_to = {
		building_avb_autocurating_vault_2
		building_avb_citadel_of_faith_2
		building_avb_corporate_vault_2
	}
	
	inline_script = {
		script = building_resources/vanilla/alpha_hub
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_alpha_hub_script
		tier = 2
	}

	prerequisites = {
		"tech_avb_autocurating_vault_2"
	}

	show_tech_unlock_if = {
		is_machine_empire = yes
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_alpha_hub_2
		TRIGGER = " "
	}
}

# Servitors
building_organic_sanctuary = {
	base_buildtime = @b1_time

	category = unity

	potential = {
		berg_st_can_build_organic_sanctuary = yes
		OR = {
			owner = { is_ai = no }
			has_upgraded_capital = yes
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				NOT = { owner = { berg_is_servitor_empire = yes } }
			}
			AND = {
				owner = { is_ai = yes }
				count_owned_pop = { limit = { has_citizenship_type = { type = citizenship_organic_trophy country = owner } } count <= 20 }
				num_buildings = { type = building_organic_sanctuary value > 3 }
			}
			AND = {
				owner = { is_ai = yes }
				count_owned_pop = { limit = { has_citizenship_type = { type = citizenship_organic_trophy country = owner } } count <= 40 }
				num_buildings = { type = building_organic_paradise value > 5 }
			}
		}
	}

	convert_to = {
		building_luxury_residence
		building_communal_housing
	}
	
	inline_script = {
		script = building_resources/vanilla/organic_paradise
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_organic_paradise_script
		tier = 1
	}

	upgrades = {
		"building_organic_paradise"
	}

	# We need to cheat here and tell AI that this will probably give some complex output since AI can not evaluate what this building does without the pops which it cant get without the building - chicken and egg
	ai_resource_production = {
		unity = 10
		physics_research = 10
		alloys = 5

		trigger = {
			NOT = { has_building = building_organic_sanctuary }
		}
	}

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 10
		physics_research = 10

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 10
		alloys = 10

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 10
		consumer_goods = 10

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = organic_sanctuary
		TRIGGER = " "
	}
}

building_organic_paradise = {
	base_buildtime = @b2_time
	can_build = no
	icon = building_paradise_dome

	category = unity

	potential = {
		berg_st_can_build_organic_sanctuary = yes
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { berg_is_servitor_empire = yes } }
	}

	convert_to = {
		building_paradise_dome
		building_communal_housing_large
	}

	inline_script = {
		script = building_resources/vanilla/organic_paradise
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_organic_paradise_script
		tier = 2
	}

	prerequisites = { "tech_paradise_dome" }
	upgrades = {
		"building_avb_organic_sanctuary_3" #AVB
	}

	show_tech_unlock_if = {
		owner = { berg_is_servitor_empire = yes }
	}

	# Here we try to adress the second issue that the AI cant evaluate the pop job output of the bio trophy given the happiness trigger that was put inplace to guard against players exploiting bio trophies

	#science
	ai_resource_production = {
		unity = 20
		physics_research = 20

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 20
		alloys = 20

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 20
		consumer_goods = 20

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = organic_paradise
		TRIGGER = " "
	}
}
building_avb_organic_sanctuary_3 = {
	base_buildtime = @avb_u4_time
	can_build = no
	category = unity
	
	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_organic_sanctuary = yes
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}
	
	convert_to = {
		building_avb_residence_3
		building_avb_communal_housing_3
	}
	
	
	inline_script = {
		script = building_resources/vanilla/organic_paradise
		tier = 3
	}
	inline_script = {
		script = vanilla/unity/berg_organic_paradise_script
		tier = 3
	}
	prerequisites = { "tech_avb_residence_3" }
	
	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}
	
	upgrades = {
		"building_avb_organic_sanctuary_4"
	}
	#science
	ai_resource_production = {
		unity = 30
		physics_research = 30

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 30
		alloys = 30

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 30
		consumer_goods = 30

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_organic_sanctuary_3
		TRIGGER = " "
	}
}

building_avb_organic_sanctuary_4 = {
	base_buildtime = @avb_u5_time
	can_build = no
	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_organic_sanctuary = yes
	}

	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}
	
	convert_to = {
		building_avb_residence_4
		building_avb_communal_housing_4
	}
	
	inline_script = {
		script = building_resources/vanilla/organic_paradise
		tier = 4
	}
	inline_script = {
		script = vanilla/unity/berg_organic_paradise_script
		tier = 4
	}
	prerequisites = { "tech_avb_residence_4" }
	
	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}
	#science
	ai_resource_production = {
		unity = 40
		physics_research = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 100
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 40
		alloys = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 100
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 40
		consumer_goods = 40

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 100
				type = produces
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_organic_sanctuary_4
		TRIGGER = " "
	}
	upgrades = {
		building_avb_organic_sanctuary_5
	}
}
building_avb_organic_sanctuary_5 = {
	base_buildtime = @avb_b6_time
	can_build = no
	category = unity

	potential = {
		berg_has_avb_mod = yes
		berg_st_can_build_organic_sanctuary = yes
	}
	destroy_trigger = {
		exists = owner
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}
	
	convert_to = {
		building_avb_residence_5
		building_avb_communal_housing_5
	}
		
	inline_script = {
		script = building_resources/vanilla/organic_paradise
		tier = 5
	}
	inline_script = {
		script = vanilla/unity/berg_organic_paradise_script
		tier = 5
	}
	prerequisites = { "tech_avb_residence_5" }
	
	show_tech_unlock_if = {
		owner = { has_valid_civic = civic_machine_servitor }
	}
	#science
	ai_resource_production = {
		unity = 50
		physics_research = 50

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = physics_research
				value >= 120
				type = produces
			}
		}
	}

	#alloys
	ai_resource_production = {
		unity = 50
		alloys = 50

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = alloys
				value >= 120
				type = produces
			}
		}
	}

	#cgs
	ai_resource_production = {
		unity = 50
		consumer_goods = 50

		trigger = {
			has_unemployed_pop_of_category = bio_trophy

			planet_resource_compare = {
				resource = consumer_goods
				value >= 120
				type = produces
			}
		}
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_organic_sanctuary_5
		TRIGGER = " "
	}
}

# Archaeotech
building_league_offices = {
	base_buildtime = @b2_time
	empire_limit = {
		base = 1
	}

	category = unity

	potential = {
		berg_st_can_build_league_offices = yes
		owner = { has_technology = tech_secrets_league }
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		has_modifier = slave_colony
	}
	inline_script = {
		script = building_resources/vanilla/league_offices
		tier = 1
	}
	inline_script = {
		script = vanilla/unity/berg_league_script
		tier = 1
	}
	prerequisites = {
		"tech_secrets_league"
	}
	upgrades = {
		"building_avb_league_offices_2" #AVB
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = league_offices
		TRIGGER = " "
	}
}
building_avb_league_offices_2 = {
	base_buildtime = @avb_f4_time

	can_build = no
	category = unity

	potential = {
		avb_hg_changes = yes
		berg_has_avb_mod = yes
		berg_st_can_build_league_offices = yes
		owner = { has_technology = tech_avb_league_offices_2 }
	}

	allow = {
		has_upgraded_capital_4 = yes
	}

	destroy_trigger = {
		has_modifier = slave_colony
	}
	inline_script = {
		script = building_resources/vanilla/league_offices
		tier = 2
	}
	inline_script = {
		script = vanilla/unity/berg_league_script
		tier = 2
	}
	triggered_desc = {
		text = building_league_offices_effect
	}

	prerequisites = {
		"tech_avb_league_offices_2"
	}
	inline_script = {
		script = berg_desc/berg_building_desc
		BUILDING = avb_league_offices_2
		TRIGGER = " "
	}
}